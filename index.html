<head>
	<title>Alex Plishka</title>
	<link rel="shortcut icon" href="img/favicon.ico" />
	<script src="js/jquery-1.11.3.min.js"></script>

	<style type="text/css">
		html {
			height: 100%;
		}

		body {
			height: 100%;
			margin: 0px;
			padding: 0px;
		}

		#container {
			width: 100%;
			height: 100%;
		}

		#nav {
			z-index: 100;
			position: absolute;
			margin: 10px 0px 0px 200px; 
			background-color: #fff;
			border: 1px black solid;
			padding: 5px;
		}

		#map {
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body onload="initialize();">
	<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PLR4K4"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-PLR4K4');</script>
	<!-- End Google Tag Manager -->



	<div id="container">
		<div id="nav">
			Nav Menu

			<div>
				<input id="zipInput" type="text" placeholder="ZIP Code"/>
				<input type="button" value="Search" onclick="searchForZip($('#zipInput').val())" />
			</div>
		</div>
		<div id="map"></div>
	</div>

</body>

<script type="text/javascript">
	var map;
	var markers = [];

	function initialize() {
		var initPosition = new google.maps.LatLng(40.435, -78.442);
		var mapOptions = {
				center: initPosition,
				mapTypeId: google.maps.MapTypeId.ROADMAP,
				zoom: 11
			};

		map = new google.maps.Map(document.getElementById("map"), mapOptions);
		setMarker(initPosition);
		// Try HTML5 geolocation.
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(function(position) {
				var pos = {
					lat: position.coords.latitude,
					lng: position.coords.longitude
				};

				clearMarkers();
				map.setCenter(pos);
				setMarker(pos);
			}, function() {
				handleLocationError(true, map.getCenter());
			});
		} else {
			// Browser doesn't support Geolocation
			handleLocationError(false, map.getCenter());
		}
	};

	function handleLocationError(browserHasGeolocation, pos) {
		alert("Couldn't find location");
	};

	function setMarker(pos) {
		var m = $("#map").get(0);
		var marker = new google.maps.Marker({
			position: pos,
		    map: map,
		    title: 'Your location'
		});
		markers.push(marker);
	};

	function searchForZip(zip) {
		var geocoder = new google.maps.Geocoder();
		geocoder.geocode( {'address' : zip}, function(results, status) {
				if (status == google.maps.GeocoderStatus.OK) {
					clearMarkers();

					var pos = results[0].geometry.location;

					map.setCenter(pos)
					setMarker(pos);
				} else {
					alert("ZIP does not exist");
				};
			}
		);
	};

	// Sets the map on all markers in the array.
	function setMapOnAll(map) {
		for (var i = 0; i < markers.length; i++) {
			markers[i].setMap(map);
		}
	}

	// Removes the markers from the map, but keeps them in the array.
	function clearMarkers() {
		setMapOnAll(null);
	}
</script>


<script src="http://maps.google.com/maps/api/js?sensor=false&libraries=places" type="text/javascript"></script>